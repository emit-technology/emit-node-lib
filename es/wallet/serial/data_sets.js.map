{"version":3,"file":"data_sets.js","sourceRoot":"","sources":["../../../src/wallet/serial/data_sets.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,aAAa,EAAE,MAAM,aAAa,CAAC;AAE5C,MAAM,EAAE,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC;AAE5B,MAAM,cAAc;IAElB,YAAY,IAAoB;QAIhC,WAAM,GAAG,GAAW,EAAE;YACpB,IAAI,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,aAAa,EAAE;gBACjD,MAAM,IAAI,KAAK,CAAC,gBAAgB,CAAC,CAAC;aACnC;YACD,MAAM,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;YAC7B,MAAM,MAAM,GAAG,IAAI,EAAE,CAAC,GAAG,CAAC,CAAC,WAAW,CAAC,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;YACxD,MAAM,MAAM,GAAkB,CAAC,MAAM,CAAC,CAAC;YACvC,KAAK,IAAI,CAAC,IAAI,IAAI,CAAC,IAAI,EAAE;gBACvB,MAAM,CAAC,IAAI,CACT,MAAM,CAAC,MAAM,CAAC;oBACZ,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,EAAE,KAAK,CAAC;oBAC1B,IAAI,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC,MAAM,CAAC,CAAC,WAAW,CACnD,MAAM,EACN,IAAI,EACJ,CAAC,CACF;oBACD,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,EAAE,KAAK,CAAC;iBAC3B,CAAC,CACH,CAAC;aACH;YACD,OAAO,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;QAC/B,CAAC,CAAC;QAxBA,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;IACnB,CAAC;CAwBF;AAED,eAAe,cAAc,CAAC","sourcesContent":["import { DataSet } from \"../types\";\nimport { VEC_T_MAX_LEN } from \"./constants\";\nimport SerialTrait from \"./serial_trait\";\nconst BN = require(\"bn.js\");\n\nclass DataSetsSerial implements SerialTrait {\n  data: Array<DataSet>;\n  constructor(data: Array<DataSet>) {\n    this.data = data;\n  }\n\n  serial = (): Buffer => {\n    if (this.data && this.data.length > VEC_T_MAX_LEN) {\n      throw new Error(\"INVALID_FORMAT\");\n    }\n    const len = this.data.length;\n    const lenBuf = new BN(len).toArrayLike(Buffer, \"le\", 4);\n    const bufArr: Array<Buffer> = [lenBuf];\n    for (let d of this.data) {\n      bufArr.push(\n        Buffer.concat([\n          Buffer.from(d.name, \"hex\"),\n          new BN(Buffer.from(d.data, \"hex\").length).toArrayLike(\n            Buffer,\n            \"le\",\n            4\n          ),\n          Buffer.from(d.data, \"hex\"),\n        ])\n      );\n    }\n    return Buffer.concat(bufArr);\n  };\n}\n\nexport default DataSetsSerial;\n"]}